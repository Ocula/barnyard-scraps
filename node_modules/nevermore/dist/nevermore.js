angular.module('sf.plugins', ['sf.plugins.tpls', 'sf.plugins.modal']);

angular.module('sf.plugins.modal', []).directive('sfModal', [function() {
  return {
    restrict: 'EA',
    templateUrl: function(element, attrs) {
      return 'modal.html';
    },
    transclude: {
      'title': '?modalTitle',
      'body': 'modalBody',
      'footer': '?modalFooter'
    },
    scope: {
      modalOptions: '=?'
    },
    link: ($scope, $el) => {
      if (!$scope.modalOptions) {
        $scope.modalOptions = {};
      }
      $scope.hideModal = () => {
        $scope.modalOptions.modalShow = false;
      };
    }
  };
}]);

angular.module('sf.plugins.tpls', []).run(['$templateCache', function(templateCache) {
  templateCache.put('modal.html', '<div class="sf-modal" ng-show="modalOptions.modalShow">' +
    '<div class="sf-modal-box">' +
    '<div class="sf-modal-title">' +
    '<span ng-transclude="title" class="text">biaoti</span>' +
    '<span class="close-icon" ng-click="hideModal()">' +
    '<i class="icon icon-close"></i>' +
    '</span>' +
    '</div>' +
    '<div class="sf-modal-body">' +
    '<div ng-transclude="body"></div>' +
    '</div>' +
    '<div class="sf-modal-footer">' +
    '<span><button type="button" class="btn btn-blue btn-sm" ng-hide="modalOptions.hideCancle" ng-click="hideModal()">Cancle</button></span>' +
    '<span ng-transclude="footer"></span>' +
    '</div>' +
    '</div>' +
    '</div>');
}]);

